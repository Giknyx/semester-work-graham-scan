# Алгоритм Грэхема

[![CMake](https://github.com/Giknyx/semester-work-graham-scan/actions/workflows/cmake.yml/badge.svg)](https://github.com/Giknyx/semester-work-graham-scan/actions/workflows/cmake.yml)

Алгоритм Грэхема - алгоритм построения выпуклой оболочки в двумерном пространстве.
В этом алгоритме задача о выпуклой оболочке решается с помощью стека, сформированного из точек-кандидатов.
Все точки входного множества заносятся в стек, а потом точки, не являющиеся вершинами выпуклой оболочки, со временем удаляются из него.
По завершении работы алгоритма в стеке остаются только вершины оболочки в порядке их обхода против часовой стрелки.

Краткий смысл алгоритма:
- _Находим самую низкую и левую точку p0._
- _Сортируем остальные точки по возрастанию полярного угла, измеряемого против часовой стрелки относительно точки p0._
- _Проверяем, сколько есть точек с разными полярными углами (если угол у двух точек одинаковый, оставляем только самую дальную от точки p0). Если оставшихся точек меньше 2, то выходим из алгоритма (все точки на 1 прямой)._
- _Кладем в стек первые 3 точки. Начиная с 4 точки проверяем, какой поворот делает угол: вторая точка с вершины стека -> точка с вершины стека -> наша точка. Если поворот не против часовой стрелки, то удаляем точку из вершины стека. Как только поворот становится против часовой стрелки (или в стеке остается одна вершина), добавляем нашу вершину._
- _По окончании алгоритма в стеке останутся только точки, образующие выпуклую оболочку._

Сложность алгоритма равна сложности выполнения алгоритма сортировки, который мы используем, так как все остальные шаги выполняются за O(n). Мы используем sort из algorithm, поэтому сложность равна O(nlog(n)).

## Команда "SBS"

| Фамилия Имя   | Вклад (%) | Прозвище              |
| :---          |   ---:    |  ---:                 |
| Бексултанов Султан   | 100        |  _босс_               |

## Структура проекта

Проект состоит из следующих частей:

- [`src`](src)/[`include`](include) - реализация алгоритма (исходный код и заголовочные файлы);
- [`benchmark`](benchmark) - контрольные тесты производительности;
- [`examples`](examples) - примеры работы с алгоритмом;
- [`dataset`](dataset) - наборы данных для запуска контрольных тестов и их генерация;

## Требования (Prerequisites)

Рекомендуемые требования:

1. С++ компилятор c поддержкой стандарта C++17 (например, _GNU GCC 8.1.x_ и выше).
2. Система автоматизации сборки _CMake_ (версия _3.12.x_ и выше).
3. Интерпретатор _Python_ (версия _3.7.x_ и выше).
4. Рекомендуемый объем оперативной памяти - не менее 4 ГБ.
5. Свободное дисковое пространство объемом ~ 3 ГБ (набор данных для контрольных тестов).

## Сборка и запуск

### Пример (Windows)

#### Сборка проекта

Склонируйте проект к себе на устройство через [Git for Windows](https://gitforwindows.org/) (либо используйте
возможности IDE):

```shell
git clone https://github.com/Algorithms-and-Data-Structures-2021/semester-work-graham-scan.git
```

Для ручной сборки проекта в терминале введите:

```shell
# переход в папку с проектом
cd C:\Users\username\asd-projects\semester-work-graham-scan

# создание папки для файлов сборки (чтобы не засорять папку с проектом) 
mkdir -p build && cd build 

# сборка проекта
cmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo && cmake --config RelWithDebInfo --build . 
```

#### Генерация тестовых данных

Генерация тестового набора данных в
формате [comma-seperated values (CSV)](https://en.wikipedia.org/wiki/Comma-separated_values):

```shell
# переход в папку генерации набора данных
cd dataset

# запуск Python-скрипта
python generate_csv_dataset.py --datasets 5 --elements 500
```

- `--datasets` - количество генерируемых наборов данных (Default 5);
- `--elements` - количество элементов в наборе данных (Default 500);

Чтобы регулировать, какое максимальное и минимальное значение могут принимать координаты у точек, необходимо менять значение констант DEFAULT_MAX_COORD и DEFAULT_MIN_COORD в файле [generate_csv_dataset.py](dataset/generate_csv_dataset.py).

Тестовые данные представлены в CSV формате. Первое число в строке - координата x, второе - координата y:

```csv
1 2
0 0
1 4
...
```

**Примечание**. Для удобства запуска контрольных тестов данные организованы в директориях:

```shell
dataset/data/
  500/
    1.csv
    2.csv
    3.csv
    ...
  5000/
    1.csv
    2.csv
    3.csv
    ...
  ...
```

По названию директории `/dataset/data/500` можно понять, что здесь хранятся наборы данных размером в 500 элементов. Названия файлов `1.csv`. `2.csv` являются номерами разных наборов данных. 

#### Контрольные тесты (benchmarks)

Для запуска контрольных тестов необходимо предварительно сгенерировать или скачать готовый набор тестовых данных.

**Примечание**. Во избежание "захламления" репозитория большим объёмом данных добавляем ссылку на сгенерированный набор данных:
[Google Drive](https://drive.google.com/drive/folders/1qdWKj3WDm9JQzFcylzwqGwz-hpj7ez0A).

##### Список контрольных тестов

| Название                  | Описание                                | Метрики         |
| :---                      | ---                                     | :---            |
| `benchmark` | контрольный тест времени выполнения алгоритма   | _время_         |

##### Примеры запуска

```shell
./benchmark <elements> <datasets> <trials>
```

- `<elements>` - количество элементов в наборах данных;
- `<datasets>` - количество наборов данных;
- `<trials>` - количество прогонов на наборе данных;

Запуск теста на 5 наборах данных размером в 500 элементов (10 прогонов на каждый набор):

```
./benchmark.exe 500 5 10
```

## Источники

- [Википедия](https://en.wikipedia.org/wiki/Graham_scan)
- [Geeksforgeeks](https://www.geeksforgeeks.org/convex-hull-set-2-graham-scan/)
- [YouTube video](https://www.youtube.com/watch?v=B2AJoQSZf4M)

_**Это не плагиат, это уважение чужого труда и помощь своим сокурсникам более подробно разобраться в теме.**_
